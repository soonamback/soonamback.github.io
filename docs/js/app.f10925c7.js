(function(){"use strict";var t={6488:function(t,e,o){var r=o(9963),s=o(6252);function n(t,e,o,r,n,a){const c=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(c)}var a={name:"App",computed:{token(){return this.$store.getters.token}},created(){this.$store.dispatch("autoSignin"),console.log(this.$store)},watch:{token:{handler(){this.token&&this.$store.dispatch("fetchProducts")},immediate:!0}}},c=o(3744);const i=(0,c.Z)(a,[["render",n]]);var u=i,d=o(3907);const l="AIzaSyCeDYJt7SuV0aISfEMZ_3FTls6DsguWDoY";var p=o(5121);let m;const h={userId:null,token:null},v={setUser(t,e){t.userId=e.userId,t.token=e.token}},f={auth(t,e){let o="";if("signin"===e.mode)o=`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${l}`;else{if("signup"!==e.mode)return;o=`https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${l}`}const r={email:e.email,password:e.password,returnSecureToken:!0};return p.Z.post(o,r).then((e=>{const o=1e3*Number(e.data.expiresIn),r=(new Date).getTime()+o;localStorage.setItem("token",e.data.idToken),localStorage.setItem("userId",e.data.localId),localStorage.setItem("expiresIn",r),m=setTimeout((()=>{t.dispatch("autoSignout")}),o),t.commit("setUser",{userId:e.data.localId,token:e.data.idToken})})).catch((t=>{const e=new Error(t.response.data.error.message||"UNKOWN_ERROR");throw e}))},signup(t,e){const o={...e,mode:"signup"};return t.dispatch("auth",o)},signin(t,e){const o={...e,mode:"signin"};return t.dispatch("auth",o)},autoSignin(t){const e=localStorage.getItem("token"),o=localStorage.getItem("userId"),r=localStorage.getItem("expiresIn"),s=Number(r)-(new Date).getTime();s<0||(m=setTimeout((()=>{t.dispatch("autoSignout")}),r),e&&o&&t.commit("setUser",{token:e,userId:o}))},signout(t){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("expiresIn"),clearTimeout(m),t.commit("setUser",{token:null,userId:null})},autoSignout(t){t.dispatch("signout")}},g={isAuthenticated:t=>!!t.token,token:t=>t.token},_={state:h,mutations:v,actions:f,getters:g};var b=_;o(560);const w={products:[]},k={setProducts(t,e){t.products=e},addProduct(t,e){t.products.push(e)}},y={fetchProducts(t){const e=t.rootState.auth.token;p.Z.get(`https://vue-3-shop-3237c-default-rtdb.asia-southeast1.firebasedatabase.app/products.json?auth=${e}`).then((e=>{const o=[];for(const t in e.data)o.push({id:t,...e.data[t]});t.commit("setProducts",o)})).catch((t=>{console.log(t)}))},storeProduct(t,e){const o={title:e.title,description:e.description,price:e.price},r=t.rootState.auth.token;p.Z.post(`https://vue-3-shop-3237c-default-rtdb.asia-southeast1.firebasedatabase.app/products.json?auth=${r}`,o).then((t=>{console.log(t)})).catch((t=>{throw new Error(t)}))}},I={products:t=>t.products,product:t=>e=>t.products.find((t=>t.id===e))},S={state:w,mutations:k,actions:y,getters:I};var T=S;const P={cartItems:[]},j="addCartItem",O={[j](t,e){t.cartItems.push(e)}},L={addItemToCart({commit:t},e){t("addCartItem",{productId:e.productId})}},$={cartItems:t=>t.cartItems,cartTotal:(t,e,o,r)=>{const s=e.cartItems;return s.reduce(((t,e)=>{const o=r.product(e.productId);return t+o.price}),0)}},A={state:P,mutations:O,actions:L,getters:$};var C=A;const E=(0,d.MT)({modules:{auth:b,shop:T,cart:C}});var U=E,x=o(2201);const D=[{path:"/",alias:"/home",component:()=>o.e(628).then(o.bind(o,7377)),beforeEnter:(t,e,o)=>{U.getters.isAuthenticated?o("/shop"):o()}}];var z=D,M=o(3577);const N={class:"row"},W={class:"col-12"},Z={class:"mt-4"},q={class:"card mt-4"},R={class:"row no-gutters"},F=(0,s._)("div",{class:"col-md-4"},[(0,s._)("img",{src:"https://dummyimage.com/600x400/34495e/fff",class:"card-img"})],-1),B={class:"col-md-8"},J={class:"card-body"},Y={class:"row"},G={class:"col-9"},H={class:"card-title mb-4"},K={class:"col-3"},V={class:"d-grid"},Q={class:"btn bg-vue2"},X={class:"row"},tt={class:"col-12"};function et(t,e,o,r,n,a){const c=(0,s.up)("TheShopLayout");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s._)("div",N,[(0,s._)("div",W,[(0,s._)("h1",Z,[(0,s.Uk)(" New Article "),(0,s._)("button",{class:"btn btn-lg bg-vue float-end",onClick:e[0]||(e[0]=t=>a.createProduct())},"Save")]),(0,s._)("div",q,[(0,s._)("div",R,[F,(0,s._)("div",B,[(0,s._)("div",J,[(0,s._)("div",Y,[(0,s._)("div",G,[(0,s._)("h5",H,(0,M.zw)(n.product.title),1)]),(0,s._)("div",K,[(0,s._)("div",V,[(0,s._)("button",Q,(0,M.zw)(n.product.price)+" €",1)])])]),(0,s._)("div",X,[(0,s._)("div",tt,(0,M.zw)(n.product.description),1)])])])])])])])])),_:1})}const ot={class:"container"},rt={class:"row"},st={class:"col-12"},nt=(0,s._)("h1",null,"Main",-1);function at(t,e,o,n,a,c){const i=(0,s.up)("TheNavbar");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i),(0,s._)("main",null,[(0,s._)("div",ot,[(0,s._)("div",rt,[(0,s._)("div",st,[((0,s.wg)(),(0,s.j4)(r.uT,{"enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut",mode:"out-in",appear:"",key:t.$route.path},{default:(0,s.w5)((()=>[(0,s.WI)(t.$slots,"default",{key:0},(()=>[nt]))])),_:3}))])])])])])}const ct={class:"navbar navbar-expand-lg bg-vue navbar-dark"},it={class:"container"},ut={class:"navbar-nav me-auto"},dt={class:"nav-item active"},lt={class:"nav-item"},pt={class:"btn bg-vue me-3"},mt=(0,s._)("i",{class:"fas fa-shopping-card"},null,-1),ht=(0,s._)("i",{class:"fas fa-sign-out-alt"},null,-1);function vt(t,e,o,r,n,a){const c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("nav",ct,[(0,s._)("div",it,[(0,s.Wm)(c,{to:"/shop",class:"navbar-brand"},{default:(0,s.w5)((()=>[(0,s.Uk)("The Shop")])),_:1}),(0,s._)("ul",ut,[(0,s._)("li",dt,[(0,s.Wm)(c,{to:"/shop",class:"nav-link"},{default:(0,s.w5)((()=>[(0,s.Uk)("Start Page")])),_:1})]),(0,s._)("li",lt,[(0,s.Wm)(c,{to:"/shop/create/product",class:"nav-link"},{default:(0,s.w5)((()=>[(0,s.Uk)("New Article")])),_:1})])]),(0,s._)("button",pt,[mt,(0,s.Uk)(" Cart "+(0,M.zw)(t.cartSum)+" € ",1)]),(0,s._)("button",{class:"btn bg-vue2",onClick:e[0]||(e[0]=t=>a.signout())},[ht,(0,s.Uk)(" Logout ")])])])}var ft={name:"TheNavbar",computed:{...(0,d.Se)({cartSum:"cartTotal"})},methods:{async signout(){try{await this.$store.dispatch("signout"),this.$router.push("/")}catch(t){console.log(t)}}}};const gt=(0,c.Z)(ft,[["render",vt]]);var _t=gt,bt={name:"TheShopLayout",components:{TheNavbar:_t}};const wt=(0,c.Z)(bt,[["render",at]]);var kt=wt,yt={name:"CreateProductPage",components:{TheShopLayout:kt},data(){return{product:{title:"Product"+Math.ceil(1e4*Math.random()),description:"  Lorem ipsum dolor sit, amet consectetur     adipisicing elit.\n                        Natus hic sapiente quo veritatis assumenda in doloribus\n                        doloremque molestiae minus cum corrupti dolorem minima,\n                        sed iste repellendus unde voluptatem, nihil facilis.\n                ",price:Math.ceil(100*Math.random())}}},methods:{async createProduct(){try{await this.$store.dispatch("storeProduct",this.product),this.$router.go(-1)}catch(t){console.log(t)}}}};const It=(0,c.Z)(yt,[["render",et]]);var St=It;const Tt={class:"row"},Pt={class:"col-12"},jt={class:"mt-4"},Ot={key:0,class:"card mt-4"},Lt={class:"row no-gutters"},$t=(0,s._)("div",{class:"col-md-4"},[(0,s._)("img",{src:"https://dummyimage.com/600x400/34495e/fff",class:"card-img"})],-1),At={class:"col-md-8"},Ct={class:"card-body"},Et={class:"row"},Ut={class:"col-9"},xt={class:"card-title mb-4"},Dt={class:"col-3"},zt={class:"d-grid"},Mt={class:"row"},Nt={class:"col-12"},Wt={class:"card mt-4"},Zt={class:"card-body"},qt=(0,s._)("h4",null,"Look here...",-1);function Rt(t,e,o,r,n,a){const c=(0,s.up)("router-link"),i=(0,s.up)("TheShopLayout");return(0,s.wg)(),(0,s.j4)(i,null,{default:(0,s.w5)((()=>[(0,s._)("div",Tt,[(0,s._)("div",Pt,[(0,s._)("h1",jt,[(0,s.Uk)(" Product Details "),(0,s._)("button",{class:"btn btn-lg bg-vue float-end",onClick:e[0]||(e[0]=e=>t.$router.go(-1))}," Go Back ")]),a.product?((0,s.wg)(),(0,s.iD)("div",Ot,[(0,s._)("div",Lt,[$t,(0,s._)("div",At,[(0,s._)("div",Ct,[(0,s._)("div",Et,[(0,s._)("div",Ut,[(0,s._)("h5",xt,(0,M.zw)(a.product.title),1)]),(0,s._)("div",Dt,[(0,s._)("div",zt,[(0,s._)("button",{class:"btn bg-vue2",onClick:e[1]||(e[1]=e=>t.addProduct({productId:a.product.id}))},(0,M.zw)(a.product.price)+" € ",1)])])]),(0,s._)("div",Mt,[(0,s._)("div",Nt,(0,M.zw)(a.product.description),1)])])])])])):(0,s.kq)("",!0),(0,s._)("div",Wt,[(0,s._)("div",Zt,[qt,(0,s.Wm)(c,{to:{name:"ReadProduct",params:{id:"-MgEuw10sUAOonJ0gazr"}}},{default:(0,s.w5)((()=>[(0,s.Uk)("-MgEuw10sUAOonJ0gazr")])),_:1})])])])])])),_:1})}var Ft={name:"ReadProductPage",components:{TheShopLayout:kt},props:{id:String},computed:{product(){return this.$store.getters.product(this.id)}},methods:{...(0,d.nv)({addProduct:"addItemToCart"})}};const Bt=(0,c.Z)(Ft,[["render",Rt]]);var Jt=Bt;const Yt={class:"roww"};function Gt(t,e,o,r,n,a){const c=(0,s.up)("ProductListItem"),i=(0,s.up)("TheShopLayout");return(0,s.wg)(),(0,s.j4)(i,null,{default:(0,s.w5)((()=>[(0,s._)("div",Yt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.products,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"col-3 m-3",key:t.id},[(0,s.Wm)(c,{product:t},null,8,["product"])])))),128))])])),_:1})}const Ht={class:"card"},Kt=(0,s._)("img",{src:"https://picsum.photos/200"},null,-1),Vt={class:"card-body"},Qt={class:"card-title"},Xt={class:"card-text"},te={class:"text-center mt-3"},ee={class:"lead"},oe={class:"text-vue"};function re(t,e,o,r,n,a){const c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Ht,[Kt,(0,s._)("div",Vt,[(0,s._)("h5",Qt,(0,M.zw)(o.product.title),1),(0,s._)("p",Xt,(0,M.zw)(a.shortendDescription),1),(0,s._)("div",te,[(0,s._)("div",ee,[(0,s._)("strong",oe,(0,M.zw)(o.product.price)+" €",1)])]),(0,s.Wm)(c,{to:{name:"ReadProduct",params:{id:o.product.id}},class:"stretched-link"},null,8,["to"])])])}var se={name:"ProductListItem",props:{product:Object},computed:{shortendDescription(){return this.product.description.length<80?this.product.description:this.product.description.slice(0,80)+"..."}}};const ne=(0,c.Z)(se,[["render",re]]);var ae=ne,ce={name:"ShopPage",components:{TheShopLayout:kt,ProductListItem:ae},computed:{products(){return this.$store.getters.products}}};const ie=(0,c.Z)(ce,[["render",Gt]]);var ue=ie;const de=[{path:"/shop",component:ue,meta:{requiresAuth:!0}},{path:"/shop/create/product",component:St,meta:{requiresAuth:!0}},{path:"/shop/read/product/:id",name:"ReadProduct",component:Jt,props:!0,meta:{requiresAuth:!0}}];var le=de;const pe=[...z,...le];var me=pe,he=o.p+"img/notFound.40e82b61.svg";const ve={class:"container"},fe={class:"row"},ge={class:"offset-2 col-8"},_e={class:"card mt-5"},be={class:"card-body text-center"},we=(0,s._)("img",{src:he,width:"300"},null,-1),ke=(0,s._)("div",{class:"display-3"},"Page not found",-1),ye=(0,s._)("hr",null,null,-1);function Ie(t,e,o,r,n,a){const c=(0,s.up)("router-link"),i=(0,s.up)("TheEmptyLayout");return(0,s.wg)(),(0,s.j4)(i,null,{default:(0,s.w5)((()=>[(0,s._)("div",ve,[(0,s._)("div",fe,[(0,s._)("div",ge,[(0,s._)("div",_e,[(0,s._)("div",be,[we,ke,ye,(0,s.Wm)(c,{to:"/",class:"btn bg-vue"},{default:(0,s.w5)((()=>[(0,s.Uk)("Go Back to Home")])),_:1})])])])])])])),_:1})}const Se={class:"container-fluid"},Te={class:"row"},Pe={class:"col-12"};function je(t,e,o,r,n,a){return(0,s.wg)(),(0,s.iD)("div",Se,[(0,s._)("div",Te,[(0,s._)("div",Pe,[(0,s.WI)(t.$slots,"default")])])])}var Oe={name:"TheEmptyLayout"};const Le=(0,c.Z)(Oe,[["render",je]]);var $e=Le,Ae={name:"TheEmptyLayout",components:$e};const Ce=(0,c.Z)(Ae,[["render",Ie]]);var Ee=Ce;const Ue=(0,x.p7)({history:(0,x.PO)(),routes:[...me,{path:"/:pathMatch(.*)*",component:Ee,redirect:"/"}]});Ue.beforeEach(((t,e,o)=>{t.meta.requiresAuth&&!U.getters.isAuthenticated?o("/"):o()}));var xe=Ue;const De=(0,r.ri)(u);De.use(U),De.use(xe),De.mount("#app")}},e={};function o(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(e,r,s,n){if(!r){var a=1/0;for(d=0;d<t.length;d++){r=t[d][0],s=t[d][1],n=t[d][2];for(var c=!0,i=0;i<r.length;i++)(!1&n||a>=n)&&Object.keys(o.O).every((function(t){return o.O[t](r[i])}))?r.splice(i--,1):(c=!1,n<a&&(a=n));if(c){t.splice(d--,1);var u=s();void 0!==u&&(e=u)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[r,s,n]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,r){return o.f[r](t,e),e}),[]))}}(),function(){o.u=function(t){return"js/"+t+".42314f1c.js"}}(),function(){o.miniCssF=function(t){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="vue-shop:";o.l=function(r,s,n,a){if(t[r])t[r].push(s);else{var c,i;if(void 0!==n)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var l=u[d];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==e+n){c=l;break}}c||(i=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.setAttribute("data-webpack",e+n),c.src=r),t[r]=[s];var p=function(e,o){c.onerror=c.onload=null,clearTimeout(m);var s=t[r];if(delete t[r],c.parentNode&&c.parentNode.removeChild(c),s&&s.forEach((function(t){return t(o)})),e)return e(o)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),i&&document.head.appendChild(c)}}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.p="/vue-shop/"}(),function(){var t={143:0};o.f.j=function(e,r){var s=o.o(t,e)?t[e]:void 0;if(0!==s)if(s)r.push(s[2]);else{var n=new Promise((function(o,r){s=t[e]=[o,r]}));r.push(s[2]=n);var a=o.p+o.u(e),c=new Error,i=function(r){if(o.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var n=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",c.name="ChunkLoadError",c.type=n,c.request=a,s[1](c)}};o.l(a,i,"chunk-"+e,e)}},o.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,n,a=r[0],c=r[1],i=r[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(s in c)o.o(c,s)&&(o.m[s]=c[s]);if(i)var d=i(o)}for(e&&e(r);u<a.length;u++)n=a[u],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(d)},r=self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(6488)}));r=o.O(r)})();
//# sourceMappingURL=app.f10925c7.js.map